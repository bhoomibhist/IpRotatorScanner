{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-lg-10 mx-auto">
        <div class="card shadow">
            <div class="card-header bg-warning text-dark">
                <h4 class="mb-0">
                    <i class="fas fa-chart-bar"></i> Indexing Reports
                </h4>
            </div>
            <div class="card-body">
                {% if reports %}
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th>#</th>
                                    <th>Report Name</th>
                                    <th>Created At</th>
                                    <th>Total URLs</th>
                                    <th>Indexed URLs</th>
                                    <th>Indexing Rate</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for report in reports %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ report.name }}</td>
                                    <td>{{ report.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                                    <td>{{ report.total_urls }}</td>
                                    <td>{{ report.indexed_urls }}</td>
                                    <td>
                                        <div class="progress" style="height: 20px;">
                                            <div class="progress-bar bg-success" role="progressbar" 
                                                 style="width: {{ report.indexed_percentage }}%">
                                                {{ report.indexed_percentage }}%
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="btn-group" role="group">
                                            <a href="{{ url_for('report_detail', report_id=report.id) }}" class="btn btn-sm btn-info">
                                                <i class="fas fa-eye"></i> View
                                            </a>
                                            <a href="{{ url_for('export_report', report_id=report.id) }}" class="btn btn-sm btn-secondary">
                                                <i class="fas fa-file-csv"></i> Export
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4">
                        <h5><i class="fas fa-info-circle text-info"></i> About Reports</h5>
                        <p>
                            Reports provide detailed information about URL indexing status checks.
                            Each report shows how many URLs were checked and how many were found to be indexed in Google.
                            You can view detailed information for each report or export the data as a CSV file.
                        </p>
                    </div>
                {% else %}
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i> No reports found. 
                        <a href="{{ url_for('index') }}" class="alert-link">Check some URLs</a> to generate reports.
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
